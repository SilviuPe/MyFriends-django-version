{% extends 'chat/navigation.html' %}
{% load static %}

{% block content_page %}
<style>
.edit-profile, .avatar-label, .username_label {
    color: white;
}
.errors {
    color: rgb(74, 19, 19);
}
.avatar_selector {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    background-color: gray;
    color: white;
    border: none;
    opacity: 20%;
    background-size: cover;
}
.avatar_selector:hover {
    opacity: 60%;
}
.username_input {
    background-color: gray;
    border: 0px;
    color: white;
}
.password_button, .email_button {
    background-color: gray;
    color: white;
    opacity: 40%;
    border: 0px;
}
.password_button:hover, .email_button:hover {
    opacity: 70%;
}
.save_button {
    background-color:gray;
    color: white;
    border: 0px;
    border-radius: 10%;
    font-size: 13px;
    padding: 5px;
}
table {
    width: 150px;
    margin-top: 10px;
    border-collapse: collapse;
}

td {
    padding: 5px;
    text-align: center;
}
table {
    width: 150px;
    margin-top: 10px;
    border-collapse: collapse;
    display: none; /* Hide the table initially */
    height: 0px; /* Set the initial height to 0px */
    transition: height 0.5s; /* Add a transition for height changes */
}

.show-table {
    display: table; /* Show the table when the class is applied */
    height: 150px; /* Set the desired height when the class is applied */
    transition: height 0.5s; /* Add a transition for height changes */
}
.button_into_image {
    background-size: cover;
    opacity: 90%;
}
.button_into_image:hover::before {
    opacity: 70%;
    content: "Change Avatar!";
}
</style>
    <div class = "container">
        <div class = "d-flex justify-content-center align-items-center edit_profile_content">
            <div class = "d-flex flex-column text-center">
                <div class = "container">
                    <h3 class = "edit-profile title">Edit profile</h3>
                </div>
                <div class = "container mt-5">
                    <div class = "col d-flex flex-column">
                        <!-- Profile avatar-->
                        <div class = "col-md-12 d-flex align-items-left"> 
                            <label class = "avatar-label">Profile Avatar</label> <!--Avatar input -->
                        </div>
                        <div class = "col-md-12 mt-3">
                            <div class = "col d-flex flex-column align-items-center">
                                <button class = "avatar_selector" style = "background-image: {{avatar_url}};">
                                    Select Avatar
                                </button>
                                <table id = "images_for_avatar">
                                    {% for img_list in rows_range %}
                                        <tr>
                                            {% for img in img_list %}
                                                <td>
                                                    <img src = "{{ img }}" class = "avatar_image">
                                                </td>
                                            {% endfor %}
                                        </tr>
                                    {% endfor %}
                                </table>
                            </div>                        
                        </div>
                        <!-- Username -->
                        <div class = "col-md-12 mt-4 d-flex align-items-left">
                            <lable class = "username_label"> Username: </lable> <!-- Username label -->
                        </div>
                        <div class = "col-md-12 mt-3 d-flex align-items-left"> 
                            <input required id = "username_in" value = "{{request.session.username}}" type = "text" class = "username_input" name = "username"> <!-- Username input -->
                        </div>
                        <!-- Email -->
                        <div class = "col-md-12 mt-4 d-flex">
                            <button class = "email_button">Change email</button>
                        </div>
                        <!-- Password -->
                        <div class = "col-md-12 mt-4 d-flex">
                            <button class = "password_button">Change password</button>
                        </div>
                        <!-- SAVE Button-->
                        <div class = "col-md-12 mt-5 d-flex justify-content-end">
                            <button class = "save_button">save changes</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class = "container d-flex justify-content-center errors mt-4"></div>
        <div class = "success_message container d-flex justify-content-center mt-4"
        style = "color: rgb(73, 133, 73);"> 
            {{success_saved_message}}
        </div>
    </div>
    <form method = "POST" action = "/chat/profile/" id = "profile_form"> {% csrf_token %}</form>
    <script src = "{% static 'js/profile.js' %}"></script>
{% endblock %}